# Следование робота по линии (ROS1)

### Используемое оборудовaние:
- робот KUKA youBot;
- отладочная плата STM32F4-Discovery;
- два инфракрасных датчика FC-123.

### Краткое описание системы

Инфракрасные датчики используются для детектирования цвета поверхности. Таким образом, располагая датчики по обе стороны линии, мы имеем возможность отслеживать отклонение робота от нее, когда один из датчиков фиксирует изменение цвета поверхности на черный (цвет линии). Когда оба датчика фиксируют черный цвет, робот останавливается.

Инфракрасные датчики подключаются к отладочной плате, которая передает считанные значения (0 или 1 для каждого из датчиков) по USB, подключенному к компьютеру. Для этого было реализовано отдельное ПО, размещенное [по ссылке](https://github.com/Ignanastya/line_sens_stm32.git).

После подлючения USB к компьютеру потребуется выполнить команду изменения прав доступа к последовательному порту. Пример команды:
```
sudo chmod a+rw /dev/ttyACM0
```

Далее используются два скрипта: для чтения последовательного порта (получение данных датчков), публикации в /line_sensors, затем чтения оттуда и управления роботом на основе полученных данных. 

### Использование скриптов

#### Запуск узла чтения данных датчиков и публикация в /line_sensors:
```
rosrun line_sens line_sensors_node
```

#### Запуск узла чтения из /line_sensors и управления роботом:
```
rosrun line_sens robot_control_node
```

### Использование GUI
```
rosrun line_sens line_follower_gui.py
```
При запуске GUI автоматически происходит запуск line_sensors_node. Это позволит видеть показания датчиков в окне пользовательского интерфейса.

Для запуска robot_control_node и начала движения робота используется кнопка "Start". Также можно принудительно остановить робота с помощью кнопки "Stop". При этом произойдет остановка robot_control_node.


